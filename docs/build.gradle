// Enable execOperations.javaexec
interface InjectedExecOps {
    @Inject //@javax.inject.Inject
    ExecOperations getExecOps()
}

clean {
    def injected = project.objects.newInstance(InjectedExecOps)
    def examples = file('examples')

    delete('api/')
    doLast {
        injected.execOps.exec {
            workingDir = examples
            commandLine 'make', 'clean'
        }
    }
}
